/*!
 * Attachment Taxonomies (https://wordpress.org/plugins/attachment-taxonomies/)
 * By Felix Arntz (https://leaves-and-love.net)
 * Licensed under GNU General Public License v3 (http://www.gnu.org/licenses/gpl-3.0.html)
 */
!function(t,e){"undefined"!=typeof window._attachment_taxonomies&&"undefined"!=typeof t.media&&(t.media.taxonomies=window._attachment_taxonomies,window._attachment_taxonomies=void 0,t.media.view.AttachmentFilters.Taxonomy=t.media.view.AttachmentFilters.extend({id:"media-attachment-taxonomy-filters",createFilters:function(){var t={};if(this.options.queryVar&&this.options.allLabel&&(t.all={text:this.options.allLabel,props:{},priority:1},t.all.props[this.options.queryVar]=null,this.options.terms&&this.options.terms.length))for(var e in this.options.terms)t[this.options.terms[e].slug]={text:this.options.terms[e].name,props:{},priority:e+2},t[this.options.terms[e].slug].props[this.options.queryVar]=this.options.terms[e].slug;this.filters=t}}),t.media.view.AttachmentsBrowser=t.media.view.AttachmentsBrowser.extend({createToolbar:function(){t.media.view.AttachmentsBrowser.__super__.createToolbar.apply(this,arguments);var e=t.media.taxonomies.data;for(var i in e)this.toolbar.set(e[i].slug+"FilterLabel",new t.media.view.Label({value:t.media.taxonomies.l10n.filterBy[e[i].slug],attributes:{for:"media-attachment-"+e[i].slugId+"-filters"},priority:-72}).render()),this.toolbar.set(e[i].slug+"Filter",new t.media.view.AttachmentFilters.Taxonomy({controller:this.controller,model:this.collection.props,priority:-72,queryVar:e[i].queryVar,terms:e[i].terms,id:"media-attachment-"+e[i].slugId+"-filters",allLabel:t.media.taxonomies.l10n.all[e[i].slug]}).render())}}),e(document).on("change",".attachment-taxonomy-select > select",function(t){var i=[];for(var o in t.target.options)t.target.options[o].selected&&i.push(t.target.options[o].value);e(t.target).parent().prev(".attachment-taxonomy-input").find("input").val(i.join(",")).trigger("change")}))}(window.wp||{},window.jQuery);